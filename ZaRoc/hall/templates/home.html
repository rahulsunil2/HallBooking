{% load staticfiles %}
{% load widget_tweaks %}

<!DOCTYPE html>
<html lang="en" >
<head>
  <title>ZaRoc</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="{% static 'images/logo.png' %}" type="image/x-icon">
    <style>
        body {
            font-family: Arial, sans-serif;
        }
    </style>

    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css'%}">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <!-- Datedropper -->
    <link rel="stylesheet" href="{% static 'css/datedropper.min.css'%}">
    <!-- timedropper -->
    <link rel="stylesheet" href="{% static 'css/timedropper.min.css'%}">
    <!-- XDSoft DateTimePicker -->
    <!-- <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.min.css"
        integrity="sha256-DOS9W6NR+NFe1fUhEE0PGKY/fubbUCnOfTje2JMDw3Y=" crossorigin="anonymous" /> -->
    {% comment %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"
        integrity="sha256-FEqEelWI3WouFOo2VWP/uJfs1y8KJ++FLh2Lbqc8SJk=" crossorigin="anonymous"></script>
    {% endcomment %}

    {% comment %} font {% endcomment %}
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cabin:700">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    {% comment %} local {% endcomment %}
    <link rel="stylesheet" href="{% static 'css/Footer-Basic.css'%}">
    <link rel="stylesheet" href="{% static 'css/Navigation-with-Button.css'%}">
    
    {% comment %} <link rel="stylesheet" href="{% static 'css/untitled.css'%}"> {% endcomment %}
    <link rel="stylesheet" href="{%  static 'css/style.css'%}">

</head>
<body>
{% if user.is_authenticated %}
        <!-- Start: Navigation with Button -->
        <nav class="navbar navbar-light navbar-expand-md navigation-clean-button">
            <div class="container"><a class="navbar-brand" href="/home">ZaRoc</a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse"
                    id="navcol-1">
                    <ul class="nav navbar-nav mr-auto">
                        <li class="nav-item" role="presentation"><a class="nav-link active" href="#">Halls</a></li>
                    </ul>
                    <span class="navbar-text actions"> 
                        <form id="logout_form" method="post" action="{% url 'account_logout' %}"> {% csrf_token %}
                            <a class="login" href="#">{{user.email}}</a>
                            <a class="login" href="#">About</a>
							{% if redirect_field_value %}
								<input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}"/>
							{% endif %}
                            <a href="javascript:$('#logout_form').submit();" class="btn action-button" style="background-color: #2e2a5f;" type="submit">Logout</a>
                        </form>
					</span>
                </div>
            </div>
        </nav>
        <!-- End: Navigation with Button -->
        <!-- partial:index.partial.html -->
        <div class="wrapper">

            <!-- back thing -->
            <div class="background">
                <div class="content invisible">
                    <h2>Book By Time</h2>
                    <p>Have an event with fixed Time ?</p>
                    <button id="left-button">GO</button>
                </div>
                <div class="content visible">
                    <h2>Book By Hall</h2>
                    <p>Have a particular hall in mind ?</p>
                    <button id="right-button">GO</button>
                </div>
            </div>

            <!-- front thing -->
            <div class="foreground">
            
                <div class="content visible">
                    <h2>Book By Time</h2>
                    <form id="login" action="{% url 'home' %}" method='post' autocomplete="off"> {% csrf_token%}
                        
                        <label for="login-email">Date : </label>
                        {% render_field date_form.date placeholder="dd/mm/yyyy" %}
                        {% comment %} <input type="date" id="login-email" name="email" placeholder="From"> {% endcomment %}                        
                        <label for="login-password">From : </label>
                        {% render_field date_form.stime placeholder="hh:mm" %}
                        {% comment %} <input type="date" id="login-email" name="email" placeholder="To"> {% endcomment %}
                        <label for="login-password">To : </label>
                        {% render_field date_form.etime placeholder="hh:mm" %}
                        {% comment %} <input type="date" id="login-email" name="email" placeholder="To"> {% endcomment %}
                    </form>
                    <div class="row">
                        <button type="submit" name="time_search" form="login" value="Login" value="check availability">Search Hall</button> 
                    </div>
                </div>
            
                <div class="content invisible">
                    <h2>Book By Hall</h2>
                    <form id="register" action="{% url 'home' %}" method='post' autocomplete="off"> {% csrf_token%}
                        <label for="name">Hall : </label>
                        <!-- <input type="text" id="name" name="name" placeholder="Choose Hall"> -->
                        {% render_field hall_form.hall_name id="name" placeholder="Choose Hall" %}
                    </form>
                    <button type="submit" name="hall_search" form="register" value="register">Search</button>
                </div>
            
            </div>            
        </div>
        <div class="booked-table">
            <a href="{% url 'exportcsv' %}">Export all bookings</a>
            {% comment %} <!------ Display Existing Bookings -------> {% endcomment %}
            {% if halls %}
                <div class="row">
                    <div class="col">
                        <h2 class="intro-text bookTitle" style="font-size: 160%;margin: 0px 0px 1% 0px;">Booked Halls</h2>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table">
                        <thead style="color: rgb(255,255,255);">
                            <tr> 
                                <th>Cancel Booking</th>                                       
                                <th>Hall Id </th>
                                <th>Booking Id </th>
                                <th>Event name</th>
                                <th>Event Details</th>
                                <th>From</th>
                                <th>To</th>                                         
                            </tr>
                        </thead>
                        <tbody style="color: rgba(255,255,255,0.93);">
                            {% for hall in halls %}
                                <tr>
                                    <td>
                                        <form id="cancel_button" method="POST">
                                            {% csrf_token %}
                                            {{hidden_form}}
                                            <input type="hidden" name="hidden_field" value="{{ hall.bId }}">
                                            <!-- <button type="submit">Cancel Booking</button> -->
                                            <a href="javascript:$('#cancel_button').submit();" class="nav-link js-scroll-trigger" type="submit">Cancel</a>
                                            
                                        </form>
                                    </td>
                                    <td>{{hall.bId}}</td>
                                    <td>{{hall.hallNo}}</td>
                                    <td>{{hall.eventName}}</td>
                                    <td>{{hall.sTime}}</td>
                                    <td>{{hall.eTime}}</td>
                                    <td>{{hall.eventDetails}}</td>                                        
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <h4> You have no Bookings</h4>
            {% endif %}
            {% comment %} <!----------------------------------------> {% endcomment %}
        </div>
         <!-- partial -->
        <!-- Start: Footer Basic -->
        <div class="footer-basic">
            <footer>
                <!-- Start: Social Icons -->
                <div class="social"><a href="#"><i class="icon ion-social-instagram"></i></a><a href="#"><i class="icon ion-social-facebook"></i></a></div>
                <!-- End: Social Icons -->
                <!-- Start: Links -->
                <ul class="list-inline">
                    <li class="list-inline-item"><a href="#">Home</a></li>
                    <li class="list-inline-item"><a href="#">About</a></li>
                    <li class="list-inline-item"><a href="#">Terms</a></li>
                </ul>
                <!-- End: Links -->
                <!-- Start: Copyright -->
                <p class="copyright">ZaRoc Â© 2020</p>
                <!-- End: Copyright -->
            </footer>
        </div>
        <!-- End: Footer Basic -->

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <script src="{% static 'js/grayscale.js'%}"></script>

        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-datetimepicker/2.5.20/jquery.datetimepicker.full.min.js"
            integrity="sha256-FEqEelWI3WouFOo2VWP/uJfs1y8KJ++FLh2Lbqc8SJk=" crossorigin="anonymous"></script> -->
        <script src="{% static 'js/timedropper.min.js'%}"></script>
        <script src="{% static 'js/datedropper.pro.min.js'%}"></script>
        <script>
            $(function () {
                $("#id_date").dateDropper({ format: 'd/m/Y',largeOnly: true});
                $("#id_stime").timeDropper({meridians: true,setCurrentTime:true,primaryColor:'#2e2a5f',borderColor:'#2e2a5f'});
                $("#id_etime").timeDropper({meridians: true,setCurrentTime:true,primaryColor:'#2e2a5f',borderColor:'#2e2a5f'});
            });
        </script>
        <script src="{% static 'js/script.js'%}"></script>
    {% else %}
        <script>
            window.location = "{% url 'signin' %}";
        </script>
    {% endif %}
</body>
</html>
